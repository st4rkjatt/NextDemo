{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/St4rk/Desktop/learningAndDevelopment/demo/src/app/utils/hooks/useSocket.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Socket } from \"socket.io-client\";\r\n\r\n/**\r\n * Due to the socket object depending on events triggering from the socket.on()\r\n * event emitter, this is not a native react implementation and therefore does\r\n * not force the react component to re-render\r\n *\r\n * By leveraging stateful hooks we can control when a react component will\r\n * trigger a re-render\r\n *\r\n * Note: The states maintained by this hook could have also just been\r\n * states living inside the values of SocketContext.Provider but this demo\r\n * was intended to represent a few ways to tackle all this abstractly using both\r\n * hooks and context providers\r\n */\r\nconst useSocket = (socket: Socket | any) => {\r\n  const [socketId, setSocketId] = useState<string | null>(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"connect\", () => {\r\n        setSocketId(socket.id);\r\n        setIsConnected(true);\r\n      });\r\n\r\n      socket.on(\"error\", (error:any) => {\r\n        setError(error);\r\n        console.error(\"Something went wrong and the socket errored!\", error);\r\n      });\r\n\r\n      // any additional common socket.on() events can be placed here with\r\n      // a controlled exposed state using setState; I would not put custom\r\n      // events inside this hook as it's purpose is mostly for connection state\r\n      // react lifecycle sync and error handling\r\n    } else {\r\n      setSocketId(null);\r\n      setIsConnected(false);\r\n      setError(null);\r\n    }\r\n  }, [socket]);\r\n\r\n  return {\r\n    socketId,\r\n    isConnected,\r\n    error\r\n  };\r\n};\r\n\r\nexport default useSocket;\r\n"],"names":[],"mappings":";;;AAAA;;AAGA;;;;;;;;;;;;CAYC,GACD,MAAM,YAAY,CAAC;IACjB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV,OAAO,EAAE,CAAC,WAAW;gBACnB,YAAY,OAAO,EAAE;gBACrB,eAAe;YACjB;YAEA,OAAO,EAAE,CAAC,SAAS,CAAC;gBAClB,SAAS;gBACT,QAAQ,KAAK,CAAC,gDAAgD;YAChE;QAEA,mEAAmE;QACnE,oEAAoE;QACpE,yEAAyE;QACzE,0CAA0C;QAC5C,OAAO;YACL,YAAY;YACZ,eAAe;YACf,SAAS;QACX;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QACL;QACA;QACA;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/St4rk/Desktop/learningAndDevelopment/demo/src/app/containers/SocketProvider.tsx"],"sourcesContent":["\"use client\"\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport io, { Socket } from \"socket.io-client\";\r\nimport useSocket from \"../utils/hooks/useSocket\";\r\n\r\n\r\n\r\nexport interface SocketContextValues {\r\n    socket: Socket | null;\r\n}\r\nexport const SocketContext = createContext<SocketContextValues>({\r\n    socket: null\r\n});\r\n\r\ninterface SocketProviderProps {\r\n    autoConnect?: boolean;\r\n    children: React.ReactNode;\r\n}\r\nconst SocketProvider: React.FC<SocketProviderProps> = ({\r\n    autoConnect = false,\r\n    children\r\n}) => {\r\n    const [socket, setSocket] = useState<Socket | null>(null);\r\n    const { socketId, isConnected } = useSocket(socket);\r\n\r\n    // initialize connection with api\r\n    useEffect(() => {\r\n        console.log('init ')\r\n        const socket = io(process.env.BASE_URL as string, {\r\n            path: \"/api/socket\",\r\n            autoConnect\r\n        });\r\n        console.log(socket, 'socket')\r\n        // set socket to local state to be passed into SocketContext.Provider\r\n        setSocket(socket);\r\n\r\n        // disconnect socket on component unmount\r\n        return () => {\r\n            console.log('socket disconnect.')\r\n            socket.disconnect();\r\n        };\r\n    }, [autoConnect]);\r\n\r\n    return (\r\n        <SocketContext.Provider value={{ socket }}>\r\n            {socket && (\r\n                <>\r\n                    {!isConnected && (\r\n                        <div style={{ marginBottom: \"24px\" }}>\r\n                            <h3>socket.io enabled but not connected</h3>\r\n                            <button type=\"button\" onClick={() => socket.connect()}>\r\n                                Connect\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {isConnected && (\r\n                        <h3>Connected to socket.io with unique ID ${socketId}</h3>\r\n                    )}\r\n\r\n                    {children}\r\n                </>\r\n            )}\r\n        </SocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport default SocketProvider;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AAHA;;;;;AAUO,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAuB;IAC5D,QAAQ;AACZ;AAMA,MAAM,iBAAgD,CAAC,EACnD,cAAc,KAAK,EACnB,QAAQ,EACX;IACG,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,yIAAA,CAAA,UAAS,AAAD,EAAE;IAE5C,iCAAiC;IACjC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,QAAQ,GAAG,CAAC;QACZ,MAAM,SAAS,CAAA,GAAA,wLAAA,CAAA,UAAE,AAAD,EAAE,QAAQ,GAAG,CAAC,QAAQ,EAAY;YAC9C,MAAM;YACN;QACJ;QACA,QAAQ,GAAG,CAAC,QAAQ;QACpB,qEAAqE;QACrE,UAAU;QAEV,yCAAyC;QACzC,OAAO;YACH,QAAQ,GAAG,CAAC;YACZ,OAAO,UAAU;QACrB;IACJ,GAAG;QAAC;KAAY;IAEhB,qBACI,8OAAC,cAAc,QAAQ;QAAC,OAAO;YAAE;QAAO;kBACnC,wBACG;;gBACK,CAAC,6BACE,8OAAC;oBAAI,OAAO;wBAAE,cAAc;oBAAO;;sCAC/B,8OAAC;sCAAG;;;;;;sCACJ,8OAAC;4BAAO,MAAK;4BAAS,SAAS,IAAM,OAAO,OAAO;sCAAI;;;;;;;;;;;;gBAM9D,6BACG,8OAAC;;wBAAG;wBAAwC;;;;;;;gBAG/C;;;;;;;;AAKrB;uCAEe","debugId":null}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/St4rk/Desktop/learningAndDevelopment/demo/src/app/components/StatUpdateBtn.tsx"],"sourcesContent":["\"use client\"\r\nimport { useContext } from \"react\";\r\nimport { UpdateIndicator } from \"../../pages/api/socket\";\r\nimport { SocketContext } from \"../containers/SocketProvider\";\r\nimport useSocket from \"../utils/hooks/useSocket\";\r\n\r\n\r\n\r\ninterface StatUpdateBtnProps {\r\n  text: string;\r\n  update: UpdateIndicator;\r\n}\r\nconst StatUpdateBtn: React.FC<StatUpdateBtnProps> = ({ text, update }) => {\r\n  const { socket } = useContext(SocketContext);\r\n  const { isConnected } = useSocket(socket);\r\n\r\n  return isConnected && socket ? (\r\n    <button type=\"button\" onClick={() => socket.emit(\"update\", update)}>\r\n      {text}\r\n    </button>\r\n  ) : null;\r\n};\r\n\r\nexport default StatUpdateBtn;\r\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AAJA;;;;;AAYA,MAAM,gBAA8C,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE;IACnE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,2IAAA,CAAA,gBAAa;IAC3C,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,yIAAA,CAAA,UAAS,AAAD,EAAE;IAElC,OAAO,eAAe,uBACpB,8OAAC;QAAO,MAAK;QAAS,SAAS,IAAM,OAAO,IAAI,CAAC,UAAU;kBACxD;;;;;eAED;AACN;uCAEe","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/St4rk/Desktop/learningAndDevelopment/demo/src/app/components/StatsTracker.tsx"],"sourcesContent":["\"use client\"\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { SocketContext } from \"../containers/SocketProvider\";\r\nimport useSocket from \"../utils/hooks/useSocket\";\r\nimport { ServerStats } from \"../../pages/api/socket\";\r\n\r\n\r\n\r\nconst StatsTracker = () => {\r\n  const { socket } = useContext(SocketContext);\r\n  const { isConnected } = useSocket(socket);\r\n  const [stats, setStats] = useState<ServerStats | null>(null);\r\n  const [recentlyUpdatedBy, setRecentlyUpdatedBy] = useState(\"\");\r\n\r\n  // update stats on event update-stats and the 'recently updated by' info\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"update-stats\", (updatedStats: Record<string, number>) => {\r\n        setStats(updatedStats);\r\n      });\r\n\r\n      socket.on(\"stats-recently-updated-by\", (updatedBy: string) => {\r\n        setRecentlyUpdatedBy(updatedBy);\r\n\r\n        // clear recently updated by\r\n        setTimeout(() => {\r\n          setRecentlyUpdatedBy(\"\");\r\n        }, 2000);\r\n      });\r\n    }\r\n  }, [socket]);\r\n\r\n  // request initial stats when stats are initially `null` and socket is established\r\n  useEffect(() => {\r\n    if (!stats && socket) {\r\n      socket.emit(\"get-stats\");\r\n    }\r\n  }, [stats, socket]);\r\n\r\n  return (\r\n    <>\r\n      {!isConnected && <h4>Stat tracker is disconnected</h4>}\r\n      {isConnected && <pre>{JSON.stringify(stats, null, 2)}</pre>}\r\n      {recentlyUpdatedBy && (\r\n        <h2>Stats were recently updated by ${recentlyUpdatedBy}</h2>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StatsTracker;\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAQA,MAAM,eAAe;IACnB,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,2IAAA,CAAA,gBAAa;IAC3C,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,yIAAA,CAAA,UAAS,AAAD,EAAE;IAClC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB;IACvD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3D,wEAAwE;IACxE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV,OAAO,EAAE,CAAC,gBAAgB,CAAC;gBACzB,SAAS;YACX;YAEA,OAAO,EAAE,CAAC,6BAA6B,CAAC;gBACtC,qBAAqB;gBAErB,4BAA4B;gBAC5B,WAAW;oBACT,qBAAqB;gBACvB,GAAG;YACL;QACF;IACF,GAAG;QAAC;KAAO;IAEX,kFAAkF;IAClF,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS,QAAQ;YACpB,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAO;KAAO;IAElB,qBACE;;YACG,CAAC,6BAAe,8OAAC;0BAAG;;;;;;YACpB,6BAAe,8OAAC;0BAAK,KAAK,SAAS,CAAC,OAAO,MAAM;;;;;;YACjD,mCACC,8OAAC;;oBAAG;oBAAiC;;;;;;;;;AAI7C;uCAEe","debugId":null}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/St4rk/Desktop/learningAndDevelopment/demo/src/app/page.tsx"],"sourcesContent":["\"use client\"\nimport { useState } from \"react\";\nimport SocketProvider from \"./containers/SocketProvider\";\nimport StatUpdateBtn from \"./components/StatUpdateBtn\";\nimport StatsTracker from \"./components/StatsTracker\";\n\n\n\nconst Home: React.FC = () => {\n  const [enableSocket, setEnableSocket] = useState(false);\n  const [isAutoConnect, setIsAutoConnect] = useState(false);\n\n  return (\n    <div style={{ margin: \"24px\" }}>\n      <h2>socket.io Example with SocketProvider for granular socket control</h2>\n\n      <div\n        style={{\n          display: \"flex\",\n          gap: \"24px\",\n          border: \"1px solid black\",\n          padding: \"24px\"\n        }}\n      >\n        <button type=\"button\" onClick={() => setEnableSocket(!enableSocket)}>\n          {enableSocket ? \"Disable socket.io\" : \"Enable socket.io\"}\n        </button>\n\n        <span>\n          <input\n            id=\"autoConnect\"\n            type=\"checkbox\"\n            checked={isAutoConnect}\n            onChange={() => setIsAutoConnect(!isAutoConnect)}\n          />\n          <label htmlFor=\"autoConnect\">Enable auto connect</label>\n        </span>\n      </div>\n\n      <div\n        style={{\n          border: \"1px solid black\",\n          padding: \"24px\",\n          marginTop: \"24px\"\n        }}\n      >\n        {!enableSocket && <h3>Disabled</h3>}\n\n        {enableSocket && (\n          <SocketProvider autoConnect={isAutoConnect}>\n            <div>\n              <div style={{ display: \"flex\", gap: \"12px\" }}>\n                <StatUpdateBtn text=\"Increment\" update=\"increment\" />\n                <StatUpdateBtn text=\"Decrement\" update=\"decrement\" />\n              </div>\n\n              <div\n                style={{\n                  border: \"1px solid black\",\n                  marginTop: \"24px\",\n                  padding: \"12px\"\n                }}\n              >\n                <StatsTracker />\n              </div>\n            </div>\n          </SocketProvider>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAQA,MAAM,OAAiB;IACrB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,qBACE,8OAAC;QAAI,OAAO;YAAE,QAAQ;QAAO;;0BAC3B,8OAAC;0BAAG;;;;;;0BAEJ,8OAAC;gBACC,OAAO;oBACL,SAAS;oBACT,KAAK;oBACL,QAAQ;oBACR,SAAS;gBACX;;kCAEA,8OAAC;wBAAO,MAAK;wBAAS,SAAS,IAAM,gBAAgB,CAAC;kCACnD,eAAe,sBAAsB;;;;;;kCAGxC,8OAAC;;0CACC,8OAAC;gCACC,IAAG;gCACH,MAAK;gCACL,SAAS;gCACT,UAAU,IAAM,iBAAiB,CAAC;;;;;;0CAEpC,8OAAC;gCAAM,SAAQ;0CAAc;;;;;;;;;;;;;;;;;;0BAIjC,8OAAC;gBACC,OAAO;oBACL,QAAQ;oBACR,SAAS;oBACT,WAAW;gBACb;;oBAEC,CAAC,8BAAgB,8OAAC;kCAAG;;;;;;oBAErB,8BACC,8OAAC,2IAAA,CAAA,UAAc;wBAAC,aAAa;kCAC3B,cAAA,8OAAC;;8CACC,8OAAC;oCAAI,OAAO;wCAAE,SAAS;wCAAQ,KAAK;oCAAO;;sDACzC,8OAAC,0IAAA,CAAA,UAAa;4CAAC,MAAK;4CAAY,QAAO;;;;;;sDACvC,8OAAC,0IAAA,CAAA,UAAa;4CAAC,MAAK;4CAAY,QAAO;;;;;;;;;;;;8CAGzC,8OAAC;oCACC,OAAO;wCACL,QAAQ;wCACR,WAAW;wCACX,SAAS;oCACX;8CAEA,cAAA,8OAAC,yIAAA,CAAA,UAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7B;uCAEe","debugId":null}}]
}